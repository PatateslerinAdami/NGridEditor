<Window x:Class="NGridMashEditor.MapViewer3D"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="3D Map Viewer - NGrid &amp; WGEO" Height="800" Width="1200" Background="#1E1E1E">
    <Grid>
        <Viewport3D Name="MainViewport" ClipToBounds="True" IsHitTestVisible="True">
            <Viewport3D.Camera>
                <PerspectiveCamera x:Name="Cam" 
                                   Position="0,3000,0" 
                                   LookDirection="0,-1,0" 
                                   UpDirection="0,0,-1" 
                                   FieldOfView="60"
                                   NearPlaneDistance="10"
                                   FarPlaneDistance="50000"/>
            </Viewport3D.Camera>

            <ModelVisual3D>
                <ModelVisual3D.Content>
                    <Model3DGroup>
                        <DirectionalLight Color="#FFFFFF" Direction="-1,-3,-2" />
                        <AmbientLight Color="#808080" />
                    </Model3DGroup>
                </ModelVisual3D.Content>
            </ModelVisual3D>

            <ModelVisual3D x:Name="TerrainVisual" />

        </Viewport3D>

        <Border VerticalAlignment="Top" HorizontalAlignment="Stretch" Background="#CC202020" Padding="10" BorderBrush="#444" BorderThickness="0,0,0,1">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="Controls: WASD + Right Click (Look) | Left Click (Pan) | Shift (Fast)" 
                           Foreground="#AAA" VerticalAlignment="Center" Margin="0,0,20,0" FontSize="11"/>
                <CheckBox Name="ChkShowNGrid" Content="Show NGrid" Foreground="Cyan" FontWeight="Bold" 
                IsChecked="True" VerticalAlignment="Center" Margin="5" Click="OnToggleNGrid"/>
                <CheckBox Name="ChkShowWgeo" Content="Show WGEO" Foreground="Orange" FontWeight="Bold" 
                IsChecked="True" VerticalAlignment="Center" Margin="5" Click="OnToggleWgeo"/>
                <Rectangle Width="1" Height="20" Fill="#555" Margin="5,0"/>
                <CheckBox Name="ChkShowGrid" Content="Show Grid" Foreground="White" IsChecked="True" VerticalAlignment="Center" Margin="5" Click="UpdateVisuals"/>
                <CheckBox Name="ChkHeatmap" Content="Height Heatmap" Foreground="White" VerticalAlignment="Center" Margin="5" Click="UpdateVisuals"/>

                <Rectangle Width="1" Height="20" Fill="#555" Margin="10,0"/>

                <Button Name="BtnSelectTexFolder" Content="1. Set Texture Folder" Padding="8,2" Margin="5" Click="BtnSelectTexFolder_Click" Background="#444" Foreground="White"/>
                <Button Name="BtnLoadWgeo" Content="2. Load WGEO" Padding="8,2" Margin="5" Click="BtnLoadWgeo_Click" Background="#444" Foreground="White"/>
                <Button Name="BtnLoadNvr" Content="Load NVR " Margin="0,5,0,0" Click="BtnLoadNvr_Click"/>
            </StackPanel>
        </Border>

        <StackPanel VerticalAlignment="Bottom" HorizontalAlignment="Left" Margin="15">
            <TextBlock Name="TxtStats" Text="Vertices: 0" Foreground="Lime" FontSize="14" FontWeight="Bold">
                <TextBlock.Effect>
                    <DropShadowEffect ShadowDepth="1" Direction="330" Color="Black" Opacity="1" BlurRadius="2"/>
                </TextBlock.Effect>
            </TextBlock>

            <TextBlock Name="TxtCursorInfo" Text="" Foreground="Cyan" FontSize="14" Margin="0,5,0,0" FontFamily="Consolas">
                <TextBlock.Effect>
                    <DropShadowEffect ShadowDepth="1" Direction="330" Color="Black" Opacity="1" BlurRadius="2"/>
                </TextBlock.Effect>
            </TextBlock>
        </StackPanel>
    </Grid>
</Window>